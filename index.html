<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Welcome to REOF-MAS: CCMAS 2016 Project’s documentation! &#8212; REOF-MAS: CCMAS 2016 Project 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="welcome-to-reof-mas-ccmas-2016-project-s-documentation">
<h1>Welcome to REOF-MAS: CCMAS 2016 Project&#8217;s documentation!<a class="headerlink" href="#welcome-to-reof-mas-ccmas-2016-project-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="project-objective">
<h2>Project objective<a class="headerlink" href="#project-objective" title="Permalink to this headline">¶</a></h2>
<p>Our multi-agent system attempts to first generate musical themes and then the most contrasting ones among the best ones are used to
generate songs with structure resembling that of compositions devised by human composers.</p>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>In our multi-agent system we have composer agents which have different musical backgrounds. Some of them get their inspiration in known themes from Mozart or Bach.
Each one of them generates a set of themes and they compare them with each other, while also asking an opinion to audience agents who do not generate any kind
of music.</p>
<p>Over time, the composer agents modify their theme generation function based on what was deemed good-sounding by the whole society.
At the end of the simulation, the most and the least complex themes of the best ones at each iteration are fed into a song creation algorithm that is in the environment, which in turn will transform the both themes in many ways to produce
a single song.</p>
</div>
<div class="section" id="terminology">
<h2>Terminology<a class="headerlink" href="#terminology" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Note</strong> A note is a basic building block of music. It has at least two attributes: a pitch (a frequency in Hz) and duration (see below).</li>
<li><strong>Duration</strong> Duration of a note is the time interval it takes to play the note relatively to the actual rythm. For instance, a note may take an entire bar, half of it, a quarter, and so on.</li>
<li><strong>Pitch</strong> Pitch is measured in Hz and defines how high or low it is perceived.</li>
<li><strong>Theme</strong> The material, usually a recognizable melody, upon which part or all of a composition is based. A theme can be seen as the combination and transformation of one or several motifs. [1]</li>
<li><strong>Motif</strong> A short succession of notes that is the smallest analyzable element or phrase within a theme. [2]</li>
<li><strong>Inversion</strong> the inverted form of a motif or theme, in which every ascending movement in the motif is transformed into a equally great descending movement and vice-versa. Check [3]</li>
<li><strong>Retrograde</strong> the retrograde form of a motif or theme, in which the last note of the motif/theme becomes the first, the second last becomes the second, etc. Check [4]</li>
<li><strong>Transposition</strong> refers to the process of moving a collection of notes up or down in pitch by a constant interval [5]</li>
</ul>
</div>
<div class="section" id="installing-and-running-the-program">
<h2>Installing and running the program<a class="headerlink" href="#installing-and-running-the-program" title="Permalink to this headline">¶</a></h2>
<p>Warning: This guide is for linux. Other operating systems may require manual installation of the packages.</p>
<p>Installing and using the program requires python 3.5, virtualenv and lilypond (<a class="reference external" href="http://lilypond.org/">http://lilypond.org/</a>).
In order to download the program and run its demonstration, use the following commands:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">reof</span><span class="o">-</span><span class="n">mas</span><span class="o">/</span><span class="n">reof</span><span class="o">-</span><span class="n">mas</span><span class="o">-</span><span class="n">src</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">reof</span><span class="o">-</span><span class="n">mas</span><span class="o">-</span><span class="n">src</span><span class="o">/</span>
<span class="n">virtualenv</span> <span class="o">-</span><span class="n">p</span> <span class="n">python3</span> <span class="n">py_env</span><span class="o">/</span>
<span class="n">source</span> <span class="n">py_env</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">cd</span> <span class="n">py_env</span><span class="o">/</span><span class="n">src</span>
<span class="n">python</span> <span class="n">melodic_chains</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>After this there should be generated artefacts in py_env/src/outputs. Vote winner themes are named artefact_[id].mid and the created song is called the_song.mid. You migth need to install soundfonts for the midis to work, because of the different instruments. On linux you can install the fluid-soundfont-gm package.</p>
</div>
<div class="section" id="agent-overview">
<h2>Agent overview<a class="headerlink" href="#agent-overview" title="Permalink to this headline">¶</a></h2>
<p>We have two types of agents: composer agents and an audience agent.</p>
<p>Composer agents are experts in music. They create short themes and evaluate each other&#8217;s creations. Composer agents also have a memory and they remember a certain amount of their own creations and artefacts from the domain.</p>
<p>The audience agent emulates a normal person who doesn&#8217;t have musical expertise. It provides an uneducated evaluation for the composers&#8217; creations.</p>
</div>
<div class="section" id="inspiring-sets">
<h2>Inspiring sets<a class="headerlink" href="#inspiring-sets" title="Permalink to this headline">¶</a></h2>
<p>Every agent has a Markov chain of note transitions. The Markov chain is initially created from a set of real songs, for example the works of Bach. During the execution of the program, agents add melodies created by themselves and other agents to their Markov chain. Currently, we opted to using a second order Markov chain. The problem of the first order is that the artefacts may sound too random. On the other hand, if we were to choose an order at least three, our system will start plagiarize too much the compositions in the corpus used for constructing the Markov chains.</p>
</div>
<div class="section" id="artefact-evaluation">
<h2>Artefact evaluation<a class="headerlink" href="#artefact-evaluation" title="Permalink to this headline">¶</a></h2>
<p>Composer agents evaluate themes using three measures: value, novelty and surprise.</p>
<p>Value is calculated using Zipf&#8217;s law, which states that in natural text, the second most frequent word appears 1/2 times as often as the most frequent word, the third most frequent word appears 1/3 times as often as the most frequent one, and so on. Whenever evaluating a theme, we measure how well it obeys the law, and return a value denoting that value.</p>
<p>In order to determine the novelty of a theme <code class="docutils literal"><span class="pre">A</span></code>, we compare the Levenshtein distance between <code class="docutils literal"><span class="pre">A</span></code> and <code class="docutils literal"><span class="pre">B</span></code> for every artefact <code class="docutils literal"><span class="pre">B</span></code> in the agents memory, and choose the minimum distance over all <code class="docutils literal"><span class="pre">B</span></code> as the novelty. Instead of using the alphabet notes, a melody is transformed into an array containing the steps between consecutive notes. We do this because what the notes are doesn&#8217;t really matter to the human ear. What matters is the change in pitch between the notes.</p>
<p>For surprise evaluation the agents use their Markov chain probabilities. The more unlikely the transitions in the melody are, the more surprising it is.</p>
<p>Audience agent is supposed to give a layman&#8217;s evaluation to themes in contrast to the expert opinion of a composer. Currently it only uses Zipf&#8217;s law, because we didn&#8217;t have enough time to implement more evaluation methods for it.</p>
</div>
<div class="section" id="generating-themes">
<h2>Generating themes<a class="headerlink" href="#generating-themes" title="Permalink to this headline">¶</a></h2>
<p>A composer agent creates a short theme using its Markov chain. The starting note is selected randomly and from there the next note is selected using the Markov chain transition probabilities. The generated themes are filtered using the composer agent&#8217;s own evaluation and the audience agent&#8217;s opinion.</p>
</div>
<div class="section" id="generating-songs">
<h2>Generating songs<a class="headerlink" href="#generating-songs" title="Permalink to this headline">¶</a></h2>
<p>Generating good songs is not trivial. In some aspects, a good song can be regarded as a good story. In it, the main character is presented to us at the beginning. During the course of the story, the main character gets through some obstacles and its world is transformed. At the end, the character is presented back to us but he is a little bit different than before.</p>
<p>We tried to apply the same principle. The main theme was selected as the most complex theme (using self_similarity() function) from among the best artifacts stored in the environment. At first, this theme is played. Then, it suffers some transformations that are commonly found in songs and are deemed successful throughout music history: inversion, retrograde, inverted retrograde and transposition. To finalize, the theme is heard again but in its inverted form.
Accompanying this voice is a continuous reproduction of the least complex theme in the environment&#8217;s best themes.</p>
</div>
<div class="section" id="source-code-layout">
<h2>Source code layout<a class="headerlink" href="#source-code-layout" title="Permalink to this headline">¶</a></h2>
<p>(All the files are in the directory <code class="docutils literal"><span class="pre">py_env/src</span></code> of our repository.)</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">audience_agent.py</span></code> - gives a layman&#8217;s evaluation for artefacts.</li>
<li><code class="docutils literal"><span class="pre">composer.py</span></code> - implements the agent responsible for generating artefacts, computing the value, novelty and surprise of each artefact, and finally voting for artefacts in the environment.</li>
<li><code class="docutils literal"><span class="pre">list_memory.py</span></code> - a FIFO (first in, first out) queue for holding at most <code class="docutils literal"><span class="pre">c</span></code> artefacts, where <code class="docutils literal"><span class="pre">c</span></code> is the maximum allowed capacity of the memory queue.</li>
<li><code class="docutils literal"><span class="pre">markov_chain.py</span></code> - implements the Markov chain. The algorithm returns absolute transitions counts, yet the function <code class="docutils literal"><span class="pre">get_transition_probs_for_state</span></code> can convert those to transition probabilities.</li>
<li><code class="docutils literal"><span class="pre">melodic_chains.py</span></code> - contains the entry point to our CC software.</li>
<li><code class="docutils literal"><span class="pre">music_environment.py</span></code> - inherits the environment from Creamas providing the voting function required by Creamas.</li>
<li><code class="docutils literal"><span class="pre">serializers.py</span></code> - contains artefact serialization.</li>
<li><code class="docutils literal"><span class="pre">utility.py</span></code> - contains miscellaneous utility functions.</li>
</ul>
</div>
<div class="section" id="source-code-documentation">
<h2>Source code documentation<a class="headerlink" href="#source-code-documentation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>You can download a zip containing some songs created by our system here: <a class="reference download internal" href="_downloads/examples.zip" download=""><code class="xref download docutils literal"><span class="pre">examples.zip</span></code></a></p>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>[1] <a class="reference external" href="https://en.wikipedia.org/wiki/Subject_(music">https://en.wikipedia.org/wiki/Subject_(music</a>) Retreived 1 Dec 2016, 14:53</li>
<li>[2] <a class="reference external" href="https://en.wikipedia.org/wiki/Motif_(music">https://en.wikipedia.org/wiki/Motif_(music</a>) Retreived 1 Dec 2016, 14:54</li>
<li>[3] <a class="reference external" href="https://en.wikipedia.org/wiki/Inversion_(music">https://en.wikipedia.org/wiki/Inversion_(music</a>) Retrieved 13 Dec 2016, 16:57</li>
<li>[4] <a class="reference external" href="https://en.wikipedia.org/wiki/Retrograde_(music">https://en.wikipedia.org/wiki/Retrograde_(music</a>) Retrieved 13 Dec 2016, 16:59</li>
<li>[5] <a class="reference external" href="https://en.wikipedia.org/wiki/Transposition_(music">https://en.wikipedia.org/wiki/Transposition_(music</a>) Retrieved 13 Dec 2016, 16:59</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to REOF-MAS: CCMAS 2016 Project&#8217;s documentation!</a><ul>
<li><a class="reference internal" href="#project-objective">Project objective</a></li>
<li><a class="reference internal" href="#summary">Summary</a></li>
<li><a class="reference internal" href="#terminology">Terminology</a></li>
<li><a class="reference internal" href="#installing-and-running-the-program">Installing and running the program</a></li>
<li><a class="reference internal" href="#agent-overview">Agent overview</a></li>
<li><a class="reference internal" href="#inspiring-sets">Inspiring sets</a></li>
<li><a class="reference internal" href="#artefact-evaluation">Artefact evaluation</a></li>
<li><a class="reference internal" href="#generating-themes">Generating themes</a></li>
<li><a class="reference internal" href="#generating-songs">Generating songs</a></li>
<li><a class="reference internal" href="#source-code-layout">Source code layout</a></li>
<li><a class="reference internal" href="#source-code-documentation">Source code documentation</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Ege Can Özer, Filipe Chichorro, Otto Hantula, Rodion Efremov.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>